<Page x:Class="WpfApp1.Pages.UserOrdersPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Мои заказы">

    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <DockPanel Margin="20" Grid.Row="0">
            <TextBlock Text="Мои заказы"
                   FontSize="24"
                   FontWeight="Bold"
                   DockPanel.Dock="Left"/>

            <Button Content="Назад в каталог"
                Background="#607D8B"
                Foreground="White"
                Padding="8,4"
                Margin="15,0,0,0"
                Click="BackToCatalog_Click"
                DockPanel.Dock="Right"/>
        </DockPanel>

        <ScrollViewer Grid.Row="1">
            <ItemsControl x:Name="ListOrders" Margin="20">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="#DDD" BorderThickness="1" Margin="0 0 0 15" Padding="10">
                            <StackPanel>
                                <!-- шапка -->
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="Заказ №" FontWeight="Bold"/>
                                    <TextBlock Text="{Binding OrderId}" Margin="2,0"/>
                                    <TextBlock Margin="10,0"
                                               Foreground="Gray"
                                               Text="{Binding OrderDate, StringFormat='от {0:dd.MM.yyyy HH:mm}'}"/>
                                    <TextBlock Margin="15,0"
                                               Foreground="Blue"
                                               Text="{Binding Status}"/>
                                </StackPanel>

                                <!-- сумма -->
                                <TextBlock Margin="0,5"
                                           FontSize="14"
                                           FontWeight="SemiBold"
                                           Text="{Binding TotalAmount, StringFormat='Сумма: {0:N2} ₽'}"/>

                                <!-- позиции -->
                                <ItemsControl ItemsSource="{Binding Items}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock FontSize="12">
                                                <Run Text="• "/>
                                                <Run Text="{Binding Name}"/>
                                                <Run Text=" × "/>
                                                <Run Text="{Binding Qty}"/>
                                                <Run Text=" — "/>
                                                <Run Text="{Binding Sum, StringFormat={}{0:N2} ₽}"/>
                                            </TextBlock>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page>
