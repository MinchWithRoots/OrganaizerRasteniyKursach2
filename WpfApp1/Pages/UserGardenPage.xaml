<Page x:Class="WpfApp1.Pages.UserGardenPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:sys="clr-namespace:System;assembly=mscorlib"
      mc:Ignorable="d"
      d:DesignHeight="600" d:DesignWidth="900"
      Title="Мои растения">

    <Grid Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Верхняя панель -->
        <StackPanel Orientation="Horizontal" Margin="10" Grid.Row="0" VerticalAlignment="Center">
            <ComboBox x:Name="ComboFilter" Width="160" Margin="5" Height="23" SelectionChanged="ComboFilter_SelectionChanged"/>
            <ComboBox x:Name="ComboSort" Width="160" Margin="5" Height="23" SelectionChanged="ComboSort_SelectionChanged">
                <ComboBoxItem Content="Название А-Я"/>
                <ComboBoxItem Content="Название Я-А"/>
                <ComboBoxItem Content="Дата ухода ↑"/>
                <ComboBoxItem Content="Дата ухода ↓"/>
            </ComboBox>
            <TextBox x:Name="TextSearch" Width="200" Height="23" Margin="5" TextChanged="TextSearch_TextChanged"/>

            <!-- Кнопка Добавить растение -->
            <Button x:Name="bCreatePlant" 
                    Content="➕ Добавить растение" 
                    Background="#4CAF50" 
                    Foreground="White" 
                    Padding="10,2" 
                    Margin="10,0,0,0"
                    Click="bCreatePlant_Click" Height="35"/>

            <!-- Кнопка уведомлений -->
            <StackPanel Orientation="Vertical" Margin="10,0,0,0" Cursor="Hand" VerticalAlignment="Center"
            MouseDown="GoToNotifications_Click" HorizontalAlignment="Right">
                <TextBlock Text="🔔" FontSize="32" HorizontalAlignment="Center"/>
                <TextBlock Text="Уведомления" FontSize="12" Foreground="Black" FontWeight="SemiBold"
               HorizontalAlignment="Center" Margin="0,4,0,0"/>
            </StackPanel>
        </StackPanel>

        <!-- Список растений -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <ItemsControl x:Name="ListUserPlants" Margin="20">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel IsItemsHost="True" Orientation="Horizontal" HorizontalAlignment="Center"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Width="270" BorderBrush="#DDD" BorderThickness="1" Padding="10" Margin="5">
                            <StackPanel>
                                <!-- Фото -->
                                <Image Source="{Binding PhotoPath}" Height="120" Width="250" Stretch="UniformToFill"/>

                                <!-- Название -->
                                <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="Bold" Margin="0,5,0,0"/>

                                <!-- Описание -->
                                <TextBlock Text="{Binding Description}" FontSize="12" TextWrapping="Wrap" Margin="0,5,0,0"/>

                                <!-- Категория -->
                                <TextBlock Text="{Binding CategoryName}" FontStyle="Italic" Foreground="Gray" Margin="0,5,0,0"/>

                                <!-- Дата посадки -->
                                <TextBlock Text="{Binding PurchaseDate, StringFormat=Посажено: dd.MM.yyyy}" 
                       FontSize="12" Foreground="DarkSlateGray" Margin="0,5,0,0"/>

                                <!-- Последний уход -->
                                <TextBlock Text="{Binding LastCareDate, StringFormat=Уход: dd.MM.yyyy}" 
                       FontSize="12" Foreground="DarkSlateGray" Margin="0,5,0,0"/>

                                <!-- Режим ухода -->
                                <TextBlock Text="{Binding CareSchedule}" 
                       FontSize="12" Foreground="Green" Margin="0,5,0,0"/>

                                <!-- Примечания -->
                                <TextBlock Text="{Binding Notes}" 
                       FontSize="12" Foreground="Red" Margin="0,5,0,0"/>

                                <!-- Температура -->
                                <TextBlock Text="{Binding MinTemp, StringFormat=Мин. темп.: {0}°C}" 
                       FontSize="12" Foreground="Blue" Margin="0,5,0,0"/>
                                <TextBlock Text="{Binding MaxTemp, StringFormat=Макс. темп.: {0}°C}" 
                       FontSize="12" Foreground="Blue" Margin="0,5,0,0"/>

                                <!-- Полив -->
                                <TextBlock Text="{Binding WateringAmount, StringFormat=Полив: {0} мл}" 
                       FontSize="12" Foreground="Brown" Margin="0,5,0,0"/>

                                <!-- Подкормка -->
                                <TextBlock Text="{Binding FertilizerName, StringFormat=Удобрение: {0}}" 
                       FontSize="12" Foreground="Green" Margin="0,5,0,0"/>
                                <TextBlock Text="{Binding FertilizerDosage, StringFormat=Дозировка: {0} мл}" 
                       FontSize="12" Foreground="Green" Margin="0,5,0,0"/>

                                <TextBlock Text="{Binding LightingLevel, StringFormat=Освещение: {0}}" 
           FontSize="12" Foreground="Orange" Margin="0,5,0,0">
                                    
                                </TextBlock>

                                <!-- Искусственное освещение -->
                                <TextBlock x:Name="ArtificialLightText"
                       Text="Искусственное освещение: Да" 
                       FontSize="12" Foreground="Orange" Margin="0,5,0,0"
                       Visibility="Collapsed">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding UsesLights}" Value="True">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>

                                <!-- Расположение -->
                                <TextBlock Text="{Binding RoomName, StringFormat=Комната: {0}}" 
                       FontSize="12" Foreground="Black" Margin="0,5,0,0"/>
                                <TextBlock Text="{Binding WindowPosition, StringFormat=Окно: {0}}" 
                       FontSize="12" Foreground="Black" Margin="0,5,0,0"/>

                                <!-- Кнопки управления -->
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,10,0,0">
                                    <Button Content="Редактировать" Background="LightBlue" Foreground="White" Padding="10,2"
                        Click="EditUserPlant_Click" Tag="{Binding}" Margin="0,0,10,0"/>
                                    <Button Content="Удалить" Background="Red" Foreground="White" Padding="10,2"
                        Click="DeleteUserPlant_Click" Tag="{Binding}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>

        <!-- Нижняя панель -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10" Grid.Row="2">
            <TextBlock x:Name="CountRecords" VerticalAlignment="Center" Margin="10,0"/>
        </StackPanel>
    </Grid>
</Page>